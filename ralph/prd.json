{
  "name": "Component Schema Conversion",
  "description": "Convert existing consumer-app components to editable schema-based components following the established pattern",
  "requirements": [
    {
      "id": "navbar",
      "component": "Navbar",
      "sourcePath": "consumer-app/components/sections/navbar/default.tsx",
      "targetPath": "consumer-app/components/sections/navbar/schema-navbar.tsx",
      "schemaType": "NavbarSectionSchema",
      "passes": false,
      "fields": {
        "logo": "ImageField or custom LogoField",
        "name": "TextField",
        "homeUrl": "TextField",
        "mobileLinks": "ListField<LinkField>",
        "actions": "ListField<NavbarActionField>",
        "showNavigation": "boolean (non-editable prop)"
      },
      "notes": "Complex component with mobile menu. Actions can be buttons or links with variants."
    },
    {
      "id": "pricing",
      "component": "Pricing",
      "sourcePath": "consumer-app/components/sections/pricing/default.tsx",
      "targetPath": "consumer-app/components/sections/pricing/schema-pricing.tsx",
      "schemaType": "PricingSectionSchema",
      "passes": false,
      "fields": {
        "title": "TextField",
        "description": "TextField",
        "plans": "ListField<PricingPlanField>"
      },
      "notes": "PricingPlanField needs: name, description, price, priceNote, cta (ButtonField), features (ListField<TextField>), variant"
    },
    {
      "id": "faq",
      "component": "FAQ",
      "sourcePath": "consumer-app/components/sections/faq/default.tsx",
      "targetPath": "consumer-app/components/sections/faq/schema-faq.tsx",
      "schemaType": "FAQSectionSchema",
      "passes": false,
      "fields": {
        "title": "TextField",
        "items": "ListField<FAQItemField>"
      },
      "notes": "FAQItemField needs: question (TextField), answer (RichTextField). Current default has ReactNode answers - schema version should use RichTextField."
    },
    {
      "id": "cta",
      "component": "CTA",
      "sourcePath": "consumer-app/components/sections/cta/default.tsx",
      "targetPath": "consumer-app/components/sections/cta/schema-cta.tsx",
      "schemaType": "CTASimpleSectionSchema",
      "passes": false,
      "fields": {
        "title": "TextField",
        "buttons": "ListField<ButtonField>"
      },
      "notes": "Simple CTA with title and buttons. Reuse existing ButtonField type."
    },
    {
      "id": "footer",
      "component": "Footer",
      "sourcePath": "consumer-app/components/sections/footer/default.tsx",
      "targetPath": "consumer-app/components/sections/footer/schema-footer.tsx",
      "schemaType": "FooterSectionSchema",
      "passes": false,
      "fields": {
        "logo": "ImageField or custom",
        "name": "TextField",
        "columns": "ListField<FooterColumnField>",
        "copyright": "TextField",
        "policies": "ListField<LinkField>"
      },
      "notes": "FooterColumnField needs: title (TextField), links (ListField<LinkField>). LinkField = {text: TextField, href: TextField}"
    }
  ],
  "pattern": {
    "steps": [
      "1. Define new field types in packages/catalyst/src/core/types.ts if needed",
      "2. Add component schema interface extending ComponentSchema",
      "3. Update Field union type if new field types added",
      "4. Create createDefault function in packages/catalyst/src/core/registry.ts",
      "5. Add to COMPONENT_REGISTRY with metadata",
      "6. Export new types from packages/catalyst/src/index.ts",
      "7. Create schema-[component].tsx in consumer-app with:",
      "   - useVariantHandling hook for variant support",
      "   - VariantSelector when in edit mode",
      "   - EditableText for text fields",
      "   - Custom Sheet/Popover editors for complex fields",
      "   - EDIT_CLASS and EDITING_CLASS constants for styling",
      "8. Test in browser with ?edit=true"
    ],
    "checklist": [
      "Schema type defined in types.ts",
      "Field union updated if new field type added",
      "createDefault function in registry.ts",
      "Added to COMPONENT_REGISTRY",
      "Types exported from index.ts",
      "Schema component uses useVariantHandling hook",
      "Schema component includes VariantSelector when in edit mode",
      "All text fields use EditableText with edit styling classes",
      "Complex fields have Sheet/Popover editors",
      "Build passes (pnpm build)",
      "Lint passes (pnpm lint)",
      "TypeScript passes (pnpm typecheck)"
    ]
  },
  "feedbackLoops": {
    "build": "pnpm build",
    "typecheck": "pnpm typecheck",
    "lint": "pnpm lint"
  },
  "notes": "All feedback loops must pass (no errors) before committing. Warnings are acceptable."
}
